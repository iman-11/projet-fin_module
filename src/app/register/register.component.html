

<section class="vh-100" style="margin-top: 50px;background-color: white;" *ngIf="!authresponse.mfaEnabled" > 
  <div class="container py-5 h-100">
    <div class="row d-flex align-items-center justify-content-center h-100">
      <div class="col-md-8 col-lg-7 col-xl-6">
        <img src="./assets/images/Mobile-login-Cristina.jpg" class="img-fluid" alt="Phone image">
      </div>
      <div class="col-md-7 col-lg-2 col-xl-5 offset-xl-1">
        <p class="mb-4 text-center" style="color: black;">Saisissez vos informations pour continuer.</p>

        <form [formGroup]="formregister" (ngSubmit)="handleregister()">
          <div class="form-outline mb-4">
            <input type="text" id="form1Example11" class="form-control form-control-lg" formControlName="firstname"/>
            <label class="form-label" for="form1Example13">FirstName</label>
          </div>
          <div class="form-outline mb-4">
            <input type="text" id="form1Example12" class="form-control form-control-lg" formControlName="lastname"/>
            <label class="form-label" for="form1Example13">LastName</label>
          </div>

          <div class="form-outline mb-4">
            <input type="email" id="form1Example13" class="form-control form-control-lg" formControlName="email"/>
            <label class="form-label" for="form1Example13">Email</label>
          </div>

          <div class="form-outline mb-4">
            <input type="password" id="form1Example14" class="form-control form-control-lg" formControlName="password"/>
            <label class="form-label" for="form1Example23">Password</label>
          </div>

          <div class="form-outline mb-4">
            <input type="password" id="form1Example15" class="form-control form-control-lg" formControlName="repeatpassword"/>
            <label class="form-label" for="form1Example23">Repeat Password</label>
          </div>

         <!-- ... Autres éléments du formulaire ... -->
        
        
        <div class="form-outline mb-4">
          <select class="form-select form-select-lg" formControlName="role" (change)="onUserTypeChange($event)">
            <option value="PATIENT">Je suis un patient</option>
            <option value="DOCTOR">Je suis un docteur</option>
          </select>
          <label class="form-label" for="userType">Choisissez votre type d'utilisateur</label>
        </div>
        
        
<!-- ... Autres éléments du formulaire ... -->


<div class="d-flex  align-items-center mb-4">
  <input
    id="rememberMe"
    name="rememberMe"
    type="checkbox"
    formControlName="mfaEnabled"
  >
  <label class="form-check-label" for="rememberMe">Enable 2FA (Two Factors Authentication)</label>
</div>


<!-- 
          <div class="d-flex justify-content-between align-items-center mb-4">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="acceptTerms" formControlName="acceptTerms"/>
              <label class="form-check-label" for="acceptTerms">J'accepte les Conditions d'Utilisation </label>
            </div>
          </div> -->


          <button type="submit" style="background-color: #80d0c7; justify-content: center;" class="btn btn-primary btn-lg btn-block">Sign up</button>
       
        

          <div class="d-flex justify-content-around align-items-center mb-4">
            <a href="#!">J'ai déjà un compte</a>
          </div>
          <button type="submit" style="background-color: #80d0c7;" class="btn btn-primary btn-lg btn-block">Sign in</button>
        </form>
      </div>
    </div>
  </div>
</section>

<div style="height: 250px;">


</div>

<!-- <div class="container1" >

  <div class="success-message-panel" *ngIf="message">
    <div class="success-icon">&#10004;</div>
    <div class="success-message">{{message}}</div>
  </div>

  <h2>Set Up Two-Factor Authentication</h2>
  <div class="qr-code">
    <img [src]="authresponse.secretImageUri" alt="QR Code">
  </div>
  <div class="form-group">
    <label for="validationCode">Enter 6 digits Validation Code Generated by the app</label>
    <input
      type="text"
      id="validationCode"
      name="validationCode"
      required
      [(ngModel)]="otpCode"
      
    >
  </div>
  <button
  type="button"
  (click)="verifyTfa()"
  [class.button-disabled]="otpCode.length < 6"

  
>Verify code</button>
</div> -->




<div class="card" *ngIf="authresponse?.mfaEnabled" style="margin-top: -178px;">
 
  <div class="card-body">
      <div>
          <p>Multi-factor authentication(MFA) has been enabled on your account. With MFA enabled, you will be asked to provide a one-time password(OTP) in addition to your username and password.
          </p>
          </div>
      <div>
          <p>You will need an authenticator app installed on your device to proceed. Please click here for more informtaion.</p>
      </div>
      <div class="d-flex">
          <div class="col-6">
              <h5>1. Scan the barcode with your authenticator app</h5>
              <div class="d-flex justify-content-center" style="margin-right: 270px;">

                  <img class="col-6" [src]="authresponse.secretImageUri" style="margin-right: 270px;" />
              </div>
          </div>
          <div class="col-6 justify-content-center d-flex flex-column">
              <div class="flex-column">

                  <p> or enter this code into the authenticator app</p>
              </div>
              <div class="flex-column">

                  <h4>{{authresponse.secret}}</h4>
              </div>
          </div>
      </div>
      <div class="d-flex">
          <div >
              <h5>2. Enter the OTP generated by your authenticator app</h5>
              <div class="d-flex justify-content-center">

                  <input class="form-control custom-input" id="totp"       [(ngModel)]="otpCode"
                  name="totp" placeholder="Insert OTP" maxlength="6">
                  <button type="button"  class="btn btn-primary custom-button"  (click)="verifyTfa()"
                  [class.button-disabled]="otpCode.length < 6" class="btn btn-primary" >Check</button>
              </div>
          </div>
          <div *ngIf="message" class="alert alert-error">{{message}}</div>
      </div>
      
  </div>
  <div class="card-footer d-flex justify-content-center p-4">
      <a routerLink="/login" class="card-link">Back to login page >></a>
  </div>

</div>